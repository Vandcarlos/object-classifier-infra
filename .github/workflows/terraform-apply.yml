name: Terraform Apply

on:
  push:
    branches: [ main ]

jobs:
  global:
    permissions:
      id-token: write
      contents: read
    uses: ./.github/workflows/commons/reusable-terraform.yml
    with:
      working-directory: global
      var-file: env/prod/terraform.tfvars
    secrets:
      ROLE_ARN: ${{ secrets.OC_INFRA_DEPLOYER_ROLE_ARN }}
      AWS_REGION: ${{ secrets.AWS_REGION }}
